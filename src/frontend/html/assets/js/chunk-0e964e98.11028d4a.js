(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-0e964e98"],{"0e16":function(e,t,l){},"77fa":function(e,t,l){"use strict";var i=l("939d"),o=l("6f14"),a=l("28d9"),s=l("4a95"),n=(l=l("f2cc"),o([].join));o=a!=Object,a=l("join",",");i({target:"Array",proto:!0,forced:o||!a},{join:function(e){return n(s(this),void 0===e?",":e)}})},"7b46":function(e,t,l){"use strict";l("0e16")},b156:function(e,t,l){"use strict";l.r(t);var i=l("66b1"),o=(l("77fa"),l("fc36"),l("3228")),a=l("90b9"),s=l("7aa9"),n={name:"import_and_export",data:function(){return{fileList1:[],fileList2:[],fileList3:[],page:1,limit:10,total:0,loadingProblems:!1,loadingImporting:!1,keyword:"",problems:[],selected_problems:[],loading:{VOJ:!1,qdoj:!1,fps:!1}}},mounted:function(){this.getProblems()},methods:{handleSelectionChange:function(e){e=e.records,this.selected_problems=e},handlechangeAll:function(){this.selected_problems=this.$refs.xTable.getCheckboxRecords()},getProblems:function(){var e=this,t={keyword:this.keyword,currentPage:0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,limit:this.limit,oj:"LOCAL"};this.loadingProblems=!0,o.a.admin_getProblemList(t).then((function(t){e.problems=t.data.data.records,e.total=t.data.data.total,e.loadingProblems=!1}))},exportProblems:function(){var e=[];if(this.selected_problems.length<=0)s.a.error(this.$i18n.t("m.Export_Problem_NULL_Tips"));else{var t,l=Object(i.a)(this.selected_problems);try{for(l.s();!(t=l.n()).done;){var o=t.value;e.push("pid="+o.id)}}catch(e){l.e(e)}finally{l.f()}var n="/api/file/export-problem?"+e.join("&");a.a.downloadFile(n)}},submitUpload:function(e){this.loading[e]=!0,this.$refs[e].submit()},onFile1Change:function(e,t){this.fileList1=t.slice(-1)},onFile2Change:function(e,t){this.fileList2=t.slice(-1)},onFile3Change:function(e,t){this.fileList3=t.slice(-1)},uploadSucceeded:function(e){this.loading.VOJ=!1,this.loading.QDOJ=!1,this.loading.FPS=!1,200!=e.status?s.a.error(e.msg):(s.a.success(e.msg),this.getProblems())},uploadFailed:function(){this.loading.VOJ=!1,this.loading.QDOJ=!1,this.loading.FPS=!1,s.a.error("Upload failed")},filterByKeyword:function(){this.getProblems()}}};l("7b46"),l=l("cba8"),l=Object(l.a)(n,(function(){var e=this,t=e.$createElement;t=e._self._c||t;return t("div",[t("el-card",[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",{staticClass:"panel-title home-title"},[e._v(e._s(e.$t("m.Export_Problem")))]),t("div",{staticClass:"filter-row"},[t("span",[t("el-button",{attrs:{icon:"el-icon-arrow-down",size:"small",type:"primary"},on:{click:e.exportProblems}},[e._v(e._s(e.$t("m.Export"))+" ")])],1),t("span",[t("vxe-input",{attrs:{placeholder:e.$t("m.Enter_keyword"),size:"medium",type:"search"},on:{"search-click":e.filterByKeyword},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.filterByKeyword.apply(null,arguments)}},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1)])]),t("vxe-table",{ref:"xTable",attrs:{"checkbox-config":{labelField:"",highlight:!0,range:!0},data:e.problems,loading:e.loadingProblems,"auto-resize":"",stripe:""},on:{"checkbox-change":e.handleSelectionChange,"checkbox-all":e.handlechangeAll}},[t("vxe-table-column",{attrs:{type:"checkbox",width:"60"}}),t("vxe-table-column",{attrs:{field:"id","min-width":"100",title:"ID"}}),t("vxe-table-column",{attrs:{title:e.$t("m.Title"),field:"title","min-width":"150"}}),t("vxe-table-column",{attrs:{title:e.$t("m.Author"),field:"author","min-width":"150"}}),t("vxe-table-column",{attrs:{title:e.$t("m.Created_Time"),field:"gmtCreate"},scopedSlots:e._u([{key:"default",fn:function(t){return t=t.row,[e._v(" "+e._s(e._f("localtime")(t.gmtCreate))+" ")]}}])})],1),t("div",{staticClass:"panel-options"},[t("el-pagination",{staticClass:"page",attrs:{"page-size":e.limit,total:e.total,layout:"prev, pager, next"},on:{"current-change":e.getProblems}})],1)],1),t("el-card",{staticStyle:{"margin-top":"15px"}},[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",{staticClass:"panel-title home-title"},[e._v(e._s(e.$t("m.Import_Problem")))])]),t("el-upload",{ref:"VOJ",attrs:{"auto-upload":!1,"file-list":e.fileList1,limit:3,"on-change":e.onFile1Change,"on-error":e.uploadFailed,"on-success":e.uploadSucceeded,"show-file-list":!0,"with-credentials":!0,action:"/api/file/import-problem",name:"file"}},[t("el-button",{attrs:{slot:"trigger",loading:e.loading.VOJ,icon:"el-icon-folder-opened",size:"small",type:"primary"},slot:"trigger"},[e._v(e._s(e.$t("m.Choose_File"))+" ")]),t("el-button",{staticStyle:{"margin-left":"10px"},attrs:{disabled:!e.fileList1.length,loading:e.loading.VOJ,icon:"el-icon-upload",size:"small",type:"success"},on:{click:function(t){return e.submitUpload("VOJ")}}},[e._v(e._s(e.$t("m.Upload"))+" ")])],1)],1),t("el-card",{staticStyle:{"margin-top":"15px"}},[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",{staticClass:"panel-title home-title"},[e._v(e._s(e.$t("m.Import_QDOJ_Problem")))])]),t("el-upload",{ref:"QDOJ",attrs:{"auto-upload":!1,"file-list":e.fileList2,limit:3,"on-change":e.onFile2Change,"on-error":e.uploadFailed,"on-success":e.uploadSucceeded,"show-file-list":!0,"with-credentials":!0,action:"/api/file/import-qdoj-problem",name:"file"}},[t("el-button",{attrs:{slot:"trigger",loading:e.loading.QDOJ,icon:"el-icon-folder-opened",size:"small",type:"primary"},slot:"trigger"},[e._v(e._s(e.$t("m.Choose_File"))+" ")]),t("el-button",{staticStyle:{"margin-left":"10px"},attrs:{disabled:!e.fileList2.length,loading:e.loading.QDOJ,icon:"el-icon-upload",size:"small",type:"success"},on:{click:function(t){return e.submitUpload("QDOJ")}}},[e._v(e._s(e.$t("m.Upload"))+" ")])],1)],1),t("el-card",{staticStyle:{"margin-top":"15px"}},[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",{staticClass:"panel-title home-title"},[e._v(e._s(e.$t("m.Import_FPS_Problem")))])]),t("el-upload",{ref:"FPS",attrs:{"auto-upload":!1,"file-list":e.fileList3,limit:3,"on-change":e.onFile3Change,"on-error":e.uploadFailed,"on-success":e.uploadSucceeded,"show-file-list":!0,"with-credentials":!0,action:"/api/file/import-fps-problem",name:"file"}},[t("el-button",{attrs:{slot:"trigger",loading:e.loading.FPS,icon:"el-icon-folder-opened",size:"small",type:"primary"},slot:"trigger"},[e._v(e._s(e.$t("m.Choose_File"))+" ")]),t("el-button",{staticStyle:{"margin-left":"10px"},attrs:{disabled:!e.fileList3.length,loading:e.loading.FPS,icon:"el-icon-upload",size:"small",type:"success"},on:{click:function(t){return e.submitUpload("FPS")}}},[e._v(e._s(e.$t("m.Upload"))+" ")])],1)],1)],1)}),[],!1,null,"38411a79",null);t.default=l.exports}}]);