(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-aa6d3ae2"],{"0b98":function(t,e,a){},3672:function(t,e,a){"use strict";var i=a("939d"),n=a("6225");i({target:"String",proto:!0,forced:a("af49")("link")},{link:function(t){return n(this,"a","href",t)}})},6225:function(t,e,a){var i=a("6f14"),n=a("3978"),l=a("3e87"),o=/"/g,r=i("".replace);t.exports=function(t,e,a,i){t=l(n(t));var u="<"+e;return""!==a&&(u+=" "+a+'="'+r(l(i),o,"&quot;")+'"'),u+">"+t+"</"+e+">"}},"92bc":function(t,e,a){"use strict";a("0b98")},a956:function(t,e,a){"use strict";a.r(e);var i=a("b49e"),n=(a("3672"),a("654b"),a("7241"),a("7736")),l=a("b355");i={name:"Editor",props:{value:{type:String,default:""},openHtml:{type:Boolean,default:!0}},data:function(){return{currentValue:this.value,img_file:{},toolbars:{bold:!0,italic:!0,header:!0,underline:!0,strikethrough:!0,mark:!0,superscript:!0,subscript:!0,quote:!0,ol:!0,ul:!0,link:!0,imagelink:!1,code:!0,table:!0,fullscreen:!0,readmodel:!0,htmlcode:!0,help:!0,undo:!0,redo:!0,trash:!0,save:!0,navigation:!0,alignleft:!0,aligncenter:!0,alignright:!0,subfield:!0,preview:!0}}},created:function(){this.isAdminRole&&(this.toolbars.imagelink=!0)},methods:{$imgAdd:function(t,e){var a,i=this;this.isAdminRole&&((a=new FormData).append("image",e),this.$http({url:"/api/file/upload-md-img",method:"post",data:a,headers:{"Content-Type":"multipart/form-data"}}).then((function(e){i.$refs.md.$img2Url(t,e.data.data.link),i.img_file[e.data.data.link]=e.data.data.fileId})))},$imgDel:function(t){this.$http({url:"/api/file/delete-md-img",method:"get",params:{fileId:this.img_file[t[0]]}})},uploadFile:function(){this.$refs.uploadInput.click()},uploadFileChange:function(t){var e=this,a=t.target.files[0];t=new FormData;t.append("file",a),this.$http({url:"/api/file/upload-md-file",method:"post",data:t,headers:{"Content-Type":"multipart/form-data"}}).then((function(t){var i=e.$refs.md;i.insertText(i.getTextareaDom(),{prefix:"[".concat(a.name,"](").concat(t.data.data.link,")"),subfix:"",str:""})}))}},computed:Object(i.a)({},Object(n.c)(["isAdminRole"])),watch:{value:function(t){this.currentValue!==t&&(this.currentValue=t)},currentValue:function(t,e){t!==e&&(this.$emit("update:value",t),this.$nextTick((function(t){Object(l.a)()})))},isAdminRole:function(t){this.toolbars.imagelink=!!t}}},a("92bc"),n=a("cba8"),a=Object(n.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mavonEditor"},[a("mavon-editor",{ref:"md",attrs:{autofocus:!1,html:t.openHtml,ishljs:!0,toolbars:t.toolbars,codeStyle:"arduino-light"},on:{imgAdd:t.$imgAdd,imgDel:t.$imgDel},scopedSlots:t._u([t.isAdminRole?{key:"left-toolbar-after",fn:function(){return[a("button",{staticClass:"op-icon fa markdown-upload",attrs:{title:t.$t("m.Upload_file"),"aria-hidden":"true",type:"button"},on:{click:t.uploadFile}},[a("i",{staticClass:"el-icon-upload"})])]},proxy:!0}:null],null,!0),model:{value:t.currentValue,callback:function(e){t.currentValue=e},expression:"currentValue"}}),a("input",{ref:"uploadInput",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:t.uploadFileChange}})],1)}),[],!1,null,null,null);e.default=a.exports},af49:function(t,e,a){var i=a("2c5e");t.exports=function(t){return i((function(){var e=""[t]('"');return e!==e.toLowerCase()||3<e.split('"').length}))}}}]);