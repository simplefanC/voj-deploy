(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7838eb88"],{8472:function(e,t,l){},b156:function(e,t,l){"use strict";l.r(t);var i=function(){var e=this,t=e._self._c;return t("div",[t("el-card",[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",{staticClass:"panel-title home-title"},[e._v(e._s(e.$t("m.Export_Problem")))]),t("div",{staticClass:"filter-row"},[t("span",[t("el-button",{attrs:{icon:"el-icon-arrow-down",size:"small",type:"primary"},on:{click:e.exportProblems}},[e._v(e._s(e.$t("m.Export"))+" ")])],1),t("span",[t("vxe-input",{attrs:{placeholder:e.$t("m.Enter_keyword"),size:"medium",type:"search"},on:{"search-click":e.filterByKeyword},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.filterByKeyword.apply(null,arguments)}},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1)])]),t("vxe-table",{ref:"xTable",attrs:{"checkbox-config":{labelField:"",highlight:!0,range:!0},data:e.problems,loading:e.loadingProblems,"auto-resize":"",stripe:""},on:{"checkbox-change":e.handleSelectionChange,"checkbox-all":e.handlechangeAll}},[t("vxe-table-column",{attrs:{type:"checkbox",width:"60"}}),t("vxe-table-column",{attrs:{field:"id","min-width":"100",title:"ID"}}),t("vxe-table-column",{attrs:{field:"problemId","min-width":"100",title:e.$t("m.Display_ID")}}),t("vxe-table-column",{attrs:{title:e.$t("m.Title"),field:"title","min-width":"200"}}),t("vxe-table-column",{attrs:{title:e.$t("m.Author"),field:"author","min-width":"100"}}),t("vxe-table-column",{attrs:{title:e.$t("m.Created_Time"),field:"gmtCreate","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function({row:t}){return[e._v(" "+e._s(e._f("localtime")(t.gmtCreate))+" ")]}}])})],1),t("div",{staticClass:"panel-options"},[t("el-pagination",{staticClass:"page",attrs:{"page-size":e.limit,total:e.total,layout:"prev, pager, next"},on:{"current-change":e.getProblems}})],1)],1),t("el-card",{staticStyle:{"margin-top":"15px"}},[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",{staticClass:"panel-title home-title"},[e._v(e._s(e.$t("m.Import_Problem")))])]),t("el-upload",{ref:"VOJ",attrs:{"auto-upload":!1,"file-list":e.fileList1,limit:3,"on-change":e.onFile1Change,"on-error":e.uploadFailed,"on-success":e.uploadSucceeded,"show-file-list":!0,"with-credentials":!0,action:"/api/file/import-problem",name:"file"}},[t("el-button",{attrs:{slot:"trigger",loading:e.loading.VOJ,icon:"el-icon-folder-opened",size:"small",type:"primary"},slot:"trigger"},[e._v(e._s(e.$t("m.Choose_File"))+" ")]),t("el-button",{staticStyle:{"margin-left":"10px"},attrs:{disabled:!e.fileList1.length,loading:e.loading.VOJ,icon:"el-icon-upload",size:"small",type:"success"},on:{click:function(t){return e.submitUpload("VOJ")}}},[e._v(e._s(e.$t("m.Upload"))+" ")])],1)],1),t("el-card",{staticStyle:{"margin-top":"15px"}},[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",{staticClass:"panel-title home-title"},[e._v(e._s(e.$t("m.Import_LOJ_Problem")))])]),t("el-form",[t("el-form-item",{attrs:{label:e.$t("m.Problem_ID"),required:""}},[t("el-input",{staticStyle:{width:"200px"},attrs:{type:"number",size:"small"},model:{value:e.LOJProblemId,callback:function(t){e.LOJProblemId=t},expression:"LOJProblemId"}})],1),t("el-form-item",[t("el-button",{attrs:{loading:e.addLOJProblemLoading,icon:"el-icon-plus",type:"primary",size:"small"},on:{click:e.addLOJProblem}},[e._v(e._s(e.$t("m.Add"))+" ")])],1)],1)],1),t("el-card",{staticStyle:{"margin-top":"15px"}},[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",{staticClass:"panel-title home-title"},[e._v(e._s(e.$t("m.Import_QDOJ_Problem")))])]),t("el-upload",{ref:"QDOJ",attrs:{"auto-upload":!1,"file-list":e.fileList2,limit:3,"on-change":e.onFile2Change,"on-error":e.uploadFailed,"on-success":e.uploadSucceeded,"show-file-list":!0,"with-credentials":!0,action:"/api/file/import-qdoj-problem",name:"file"}},[t("el-button",{attrs:{slot:"trigger",loading:e.loading.QDOJ,icon:"el-icon-folder-opened",size:"small",type:"primary"},slot:"trigger"},[e._v(e._s(e.$t("m.Choose_File"))+" ")]),t("el-button",{staticStyle:{"margin-left":"10px"},attrs:{disabled:!e.fileList2.length,loading:e.loading.QDOJ,icon:"el-icon-upload",size:"small",type:"success"},on:{click:function(t){return e.submitUpload("QDOJ")}}},[e._v(e._s(e.$t("m.Upload"))+" ")])],1)],1),t("el-card",{staticStyle:{"margin-top":"15px"}},[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",{staticClass:"panel-title home-title"},[e._v(e._s(e.$t("m.Import_FPS_Problem")))])]),t("el-upload",{ref:"FPS",attrs:{"auto-upload":!1,"file-list":e.fileList3,limit:3,"on-change":e.onFile3Change,"on-error":e.uploadFailed,"on-success":e.uploadSucceeded,"show-file-list":!0,"with-credentials":!0,action:"/api/file/import-fps-problem",name:"file"}},[t("el-button",{attrs:{slot:"trigger",loading:e.loading.FPS,icon:"el-icon-folder-opened",size:"small",type:"primary"},slot:"trigger"},[e._v(e._s(e.$t("m.Choose_File"))+" ")]),t("el-button",{staticStyle:{"margin-left":"10px"},attrs:{disabled:!e.fileList3.length,loading:e.loading.FPS,icon:"el-icon-upload",size:"small",type:"success"},on:{click:function(t){return e.submitUpload("FPS")}}},[e._v(e._s(e.$t("m.Upload"))+" ")])],1)],1)],1)},o=[],a=(l("24b8"),l("3228")),s=l("90b9"),r=l("7aa9"),n=(l("9a36"),{name:"import_and_export",data(){return{fileList1:[],fileList2:[],fileList3:[],page:1,limit:10,total:0,loadingProblems:!1,loadingImporting:!1,keyword:"",problems:[],selected_problems:[],loading:{VOJ:!1,qdoj:!1,fps:!1},addLOJProblemLoading:!1,LOJProblemId:""}},mounted(){this.getProblems()},methods:{handleSelectionChange({records:e}){this.selected_problems=e},handlechangeAll(){this.selected_problems=this.$refs.xTable.getCheckboxRecords()},addLOJProblem(){this.LOJProblemId?(this.addLOJProblemLoading=!0,a["a"].admin_addLOJProblem(this.LOJProblemId).then(e=>{this.addLOJProblemLoading=!1,r["a"].success(this.$i18n.t("m.Add_Successfully")),this.currentChange(1)},e=>{this.addLOJProblemLoading=!1})):r["a"].error(this.$i18n.t("m.Problem_ID_is_required"))},getProblems(e=1){let t={keyword:this.keyword,currentPage:e,limit:this.limit,oj:"LOCAL"};this.loadingProblems=!0,a["a"].admin_getProblemList(t).then(e=>{this.problems=e.data.data.records,this.total=e.data.data.total,this.loadingProblems=!1})},exportProblems(){let e=[];if(this.selected_problems.length<=0)return void r["a"].error(this.$i18n.t("m.Export_Problem_NULL_Tips"));for(let l of this.selected_problems)e.push("pid="+l.id);let t="/api/file/export-problem?"+e.join("&");s["a"].downloadFile(t)},submitUpload(e){this.loading[e]=!0,this.$refs[e].submit()},onFile1Change(e,t){this.fileList1=t.slice(-1)},onFile2Change(e,t){this.fileList2=t.slice(-1)},onFile3Change(e,t){this.fileList3=t.slice(-1)},uploadSucceeded(e){this.loading.VOJ=!1,this.loading.QDOJ=!1,this.loading.FPS=!1,200!=e.status?r["a"].error(e.msg):(r["a"].success(e.msg),this.getProblems())},uploadFailed(){this.loading.VOJ=!1,this.loading.QDOJ=!1,this.loading.FPS=!1,r["a"].error("Upload failed")},filterByKeyword(){this.getProblems()}}}),d=n,m=(l("e063"),l("0b56")),c=Object(m["a"])(d,i,o,!1,null,"793c9be2",null);t["default"]=c.exports},e063:function(e,t,l){"use strict";l("8472")}}]);