(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1b666b40"],{5900:function(t,e,a){},"792d":function(t,e,a){"use strict";a("5900")},a956:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mavonEditor"},[e("mavon-editor",{ref:"md",attrs:{autofocus:!1,html:t.openHtml,ishljs:!0,toolbars:t.toolbars,codeStyle:"arduino-light"},on:{imgAdd:t.$imgAdd,imgDel:t.$imgDel},scopedSlots:t._u([t.isAdminRole?{key:"left-toolbar-after",fn:function(){return[e("button",{staticClass:"op-icon fa markdown-upload",attrs:{title:t.$t("m.Upload_file"),"aria-hidden":"true",type:"button"},on:{click:t.uploadFile}},[e("i",{staticClass:"el-icon-upload"})])]},proxy:!0}:null],null,!0),model:{value:t.currentValue,callback:function(e){t.currentValue=e},expression:"currentValue"}}),e("input",{ref:"uploadInput",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:t.uploadFileChange}})],1)},l=[],n=a("7736"),o=a("b355"),r={name:"Editor",props:{value:{type:String,default:""},openHtml:{type:Boolean,default:!0}},data(){return{currentValue:this.value,img_file:{},toolbars:{bold:!0,italic:!0,header:!0,underline:!0,strikethrough:!0,mark:!0,superscript:!0,subscript:!0,quote:!0,ol:!0,ul:!0,link:!0,imagelink:!1,code:!0,table:!0,fullscreen:!0,readmodel:!0,htmlcode:!0,help:!0,undo:!0,redo:!0,trash:!0,save:!0,navigation:!0,alignleft:!0,aligncenter:!0,alignright:!0,subfield:!0,preview:!0}}},created(){this.isAdminRole&&(this.toolbars.imagelink=!0)},methods:{$imgAdd(t,e){if(this.isAdminRole){var a=new FormData;a.append("image",e),this.$http({url:"/api/file/upload-md-img",method:"post",data:a,headers:{"Content-Type":"multipart/form-data"}}).then(e=>{this.$refs.md.$img2Url(t,e.data.data.link),this.img_file[e.data.data.link]=e.data.data.fileId})}},$imgDel(t){this.$http({url:"/api/file/delete-md-img",method:"get",params:{fileId:this.img_file[t[0]]}})},uploadFile(){this.$refs.uploadInput.click()},uploadFileChange(t){const e=t.target.files[0],a=new FormData;a.append("file",e),this.$http({url:"/api/file/upload-md-file",method:"post",data:a,headers:{"Content-Type":"multipart/form-data"}}).then(t=>{const a=this.$refs.md;a.insertText(a.getTextareaDom(),{prefix:`[${e.name}](${t.data.data.link})`,subfix:"",str:""})})}},computed:{...Object(n["c"])(["isAdminRole"])},watch:{value(t){this.currentValue!==t&&(this.currentValue=t)},currentValue(t,e){t!==e&&(this.$emit("update:value",t),this.$nextTick(t=>{Object(o["a"])()}))},isAdminRole(t){this.toolbars.imagelink=!!t}}},d=r,s=(a("792d"),a("0b56")),u=Object(s["a"])(d,i,l,!1,null,null,null);e["default"]=u.exports}}]);