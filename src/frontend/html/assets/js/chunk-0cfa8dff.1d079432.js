(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0cfa8dff"],{"2c02":function(t,e,i){},"7b98":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t._self._c;return e("div",[e("el-card",[e("div",{attrs:{slot:"header"},slot:"header"},[e("span",{staticClass:"panel-title home-title"},[t._v(t._s(t.$t("m.Contest_List")))]),e("div",{staticClass:"filter-row"},[e("span",[e("vxe-input",{attrs:{placeholder:t.$t("m.Enter_keyword"),size:"medium",type:"search"},on:{"search-click":t.filterByKeyword},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterByKeyword.apply(null,arguments)}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1)])]),e("vxe-table",{ref:"xTable",attrs:{data:t.contestList,loading:t.loading,align:"center","auto-resize":"",stripe:""}},[e("vxe-table-column",{attrs:{field:"id",title:"ID",width:"80"}}),e("vxe-table-column",{attrs:{title:t.$t("m.Title"),field:"title","min-width":"150","show-overflow":""}}),e("vxe-table-column",{attrs:{title:t.$t("m.Type"),width:"100"},scopedSlots:t._u([{key:"default",fn:function({row:i}){return[e("el-tag",{attrs:{type:"gray"}},[t._v(t._s(t._f("parseContestType")(i.type)))])]}}])}),e("vxe-table-column",{attrs:{title:t.$t("m.Auth"),width:"100"},scopedSlots:t._u([{key:"default",fn:function({row:i}){return[e("el-tooltip",{attrs:{content:t.$t("m."+t.CONTEST_TYPE_REVERSE[i.auth].tips),effect:"light",placement:"top"}},[e("el-tag",{attrs:{type:t.CONTEST_TYPE_REVERSE[i.auth].color,effect:"plain"}},[t._v(" "+t._s(t.CONTEST_TYPE_REVERSE[i.auth].name)+" ")])],1)]}}])}),e("vxe-table-column",{attrs:{title:t.$t("m.Status"),width:"100"},scopedSlots:t._u([{key:"default",fn:function({row:i}){return[e("el-tag",{attrs:{color:t.CONTEST_STATUS_REVERSE[i.status].color,effect:"dark",size:"medium"}},[t._v(" "+t._s(t.CONTEST_STATUS_REVERSE[i.status].name)+" ")])]}}])}),e("vxe-table-column",{attrs:{title:t.$t("m.Visible"),"min-width":"80"},scopedSlots:t._u([{key:"default",fn:function({row:i}){return[e("el-switch",{attrs:{disabled:!t.isSuperAdmin&&t.userInfo.uid!=i.uid},on:{change:function(e){return t.changeContestVisible(i.id,i.visible,i.uid)}},model:{value:i.visible,callback:function(e){t.$set(i,"visible",e)},expression:"row.visible"}})]}}])}),e("vxe-table-column",{attrs:{title:t.$t("m.Info"),"min-width":"210"},scopedSlots:t._u([{key:"default",fn:function({row:i}){return[e("p",[t._v("Start Time: "+t._s(t._f("localtime")(i.startTime)))]),e("p",[t._v("End Time: "+t._s(t._f("localtime")(i.endTime)))]),e("p",[t._v("Created Time: "+t._s(t._f("localtime")(i.gmtCreate)))]),e("p",[t._v("Creator: "+t._s(i.author))])]}}])}),e("vxe-table-column",{attrs:{title:t.$t("m.Option"),"min-width":"150"},scopedSlots:t._u([{key:"default",fn:function({row:i}){return[t.isSuperAdmin||t.isProblemAdmin||t.userInfo.uid==i.uid?[e("div",{staticStyle:{"margin-bottom":"10px"}},[t.isSuperAdmin||t.userInfo.uid==i.uid?e("el-tooltip",{attrs:{content:t.$t("m.Edit"),effect:"dark",placement:"top"}},[e("el-button",{attrs:{icon:"el-icon-edit",size:"mini",type:"primary"},nativeOn:{click:function(e){return t.goEdit(i.id)}}})],1):t._e(),t.isSuperAdmin||t.userInfo.uid==i.uid?e("el-tooltip",{attrs:{content:t.$t("m.View_Contest_Problem_List"),effect:"dark",placement:"top"}},[e("el-button",{attrs:{icon:"el-icon-tickets",size:"mini",type:"success"},nativeOn:{click:function(e){return t.goContestProblemList(i.id)}}})],1):t._e()],1),e("div",{staticStyle:{"margin-bottom":"10px"}},[t.isSuperAdmin||t.userInfo.uid==i.uid?e("el-tooltip",{attrs:{content:t.$t("m.View_Contest_Announcement_List"),effect:"dark",placement:"top"}},[e("el-button",{attrs:{icon:"el-icon-info",size:"mini",type:"info"},nativeOn:{click:function(e){return t.goContestAnnouncement(i.id)}}})],1):t._e(),t.isSuperAdmin||t.userInfo.uid==i.uid?e("el-tooltip",{attrs:{content:t.$t("m.Download_Contest_Submission"),effect:"dark",placement:"top"}},[e("el-button",{attrs:{icon:"el-icon-download",size:"mini",type:"warning"},nativeOn:{click:function(e){return t.openDownloadOptions(i.id)}}})],1):t._e()],1),e("div",[e("el-tooltip",{attrs:{content:t.$t("m.Clone"),effect:"dark",placement:"top"}},[e("el-button",{attrs:{icon:"el-icon-copy-document",size:"mini",type:"success"},nativeOn:{click:function(e){return t.cloneContest(i.id)}}})],1),t.isSuperAdmin?e("el-tooltip",{attrs:{content:t.$t("m.Delete"),effect:"dark",placement:"top"}},[e("el-button",{attrs:{icon:"el-icon-delete",size:"mini",type:"danger"},nativeOn:{click:function(e){return t.deleteContest(i.id)}}})],1):t._e()],1)]:t._e()]}}])})],1),e("div",{staticClass:"panel-options"},[e("el-pagination",{staticClass:"page",attrs:{"page-size":t.pageSize,total:t.total,layout:"prev, pager, next"},on:{"current-change":t.currentChange}})],1)],1),e("el-dialog",{attrs:{title:t.$t("m.Download_Contest_Submission"),visible:t.downloadDialogVisible,width:"400px"},on:{"update:visible":function(e){t.downloadDialogVisible=e}}},[e("el-row",{attrs:{gutter:10}},[e("el-col",{attrs:{span:12}},[e("el-switch",{attrs:{"active-text":t.excludeAdmin?t.$t("m.Exclude_admin_submissions"):t.$t("m.All_user_submissions")},model:{value:t.excludeAdmin,callback:function(e){t.excludeAdmin=e},expression:"excludeAdmin"}})],1),e("el-col",{attrs:{span:12}},[e("el-switch",{attrs:{"active-text":t.allStatus?t.$t("m.All_Status_submissions"):t.$t("m.AC_Status_submissions")},model:{value:t.allStatus,callback:function(e){t.allStatus=e},expression:"allStatus"}})],1)],1),e("el-radio-group",{staticStyle:{"margin-top":"25px"},model:{value:t.splitType,callback:function(e){t.splitType=e},expression:"splitType"}},[e("el-radio",{attrs:{label:"user"}},[t._v(t._s(t.$t("m.SplitType_User")))]),e("el-radio",{attrs:{label:"problem"}},[t._v(t._s(t.$t("m.SplitType_Problem")))])],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:t.downloadSubmissions}},[t._v(t._s(t.$t("m.OK")))])],1)],1)],1)},s=[],o=(i("24b8"),i("3228")),a=i("90b9"),l=i("9a36"),r=i("7736"),c=i("7aa9"),u={name:"ContestList",data(){return{pageSize:10,total:0,contestList:[],keyword:"",loading:!1,excludeAdmin:!0,allStatus:!0,splitType:"user",currentPage:1,currentId:1,downloadDialogVisible:!1,CONTEST_TYPE_REVERSE:{}}},mounted(){this.CONTEST_TYPE_REVERSE=Object.assign({},l["d"]),this.CONTEST_STATUS_REVERSE=Object.assign({},l["b"]),this.getContestList(this.currentPage)},watch:{$route(){let t="true"==this.$route.query.refresh;t&&this.getContestList(1)}},computed:{...Object(r["c"])(["isSuperAdmin","isProblemAdmin","userInfo"])},methods:{currentChange(t){this.currentPage=t,this.getContestList(t)},getContestList(t){this.loading=!0,o["a"].admin_getContestList(t,this.pageSize,this.keyword).then(t=>{this.loading=!1,this.total=t.data.data.total,this.contestList=t.data.data.records},t=>{this.loading=!1})},openDownloadOptions(t){this.downloadDialogVisible=!0,this.currentId=t},downloadSubmissions(){let t=`/api/file/download-contest-ac-submission?cid=${this.currentId}&excludeAdmin=${this.excludeAdmin}&allStatus=${this.allStatus}&splitType=${this.splitType}`;a["a"].downloadFile(t),this.downloadDialogVisible=!1},goEdit(t){this.$router.push({name:"admin-edit-contest",params:{contestId:t}})},goContestAnnouncement(t){this.$router.push({name:"admin-contest-announcement",params:{contestId:t}})},goContestProblemList(t){this.$router.push({name:"admin-contest-problem-list",params:{contestId:t}})},cloneContest(t){this.$confirm(this.$i18n.t("m.Clone_Contest_Tips"),"Tips",{confirmButtonText:this.$i18n.t("m.OK"),cancelButtonText:this.$i18n.t("m.Cancel"),type:"warning"}).then(()=>{o["a"].admin_cloneContest(t).then(t=>{c["a"].success(this.$i18n.t("m.Clone_successfully")),this.currentChange(1)})})},deleteContest(t){this.$confirm(this.$i18n.t("m.Delete_Contest_Tips"),"Tips",{confirmButtonText:this.$i18n.t("m.OK"),cancelButtonText:this.$i18n.t("m.Cancel"),type:"warning"}).then(()=>{o["a"].admin_deleteContest(t).then(t=>{c["a"].success(this.$i18n.t("m.Delete_successfully")),this.currentChange(1)})})},changeContestVisible(t,e,i){o["a"].admin_changeContestVisible(t,e,i).then(t=>{c["a"].success(this.$i18n.t("m.Update_Successfully"))})},filterByKeyword(){this.currentChange(1)}}},d=u,m=(i("de4f"),i("0b56")),p=Object(m["a"])(d,n,s,!1,null,"0cdad244",null);e["default"]=p.exports},de4f:function(t,e,i){"use strict";i("2c02")}}]);