(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e4b17a3a"],{"99db":function(i,t,n){},bf6d:function(i,t,n){"use strict";n("99db")},ecc7:function(i,t,n){"use strict";n.r(t);var a=function(){var i=this,t=i._self._c;return t("div",{staticClass:"view"},[t("el-card",[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",{staticClass:"panel-title home-title"},[i._v(" "+i._s(i.title)+" ")])]),t("el-form",{attrs:{"label-position":"top"}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:i.$t("m.Training_rank"),required:""}},[t("el-input-number",{attrs:{label:i.$t("m.Training_rank"),max:2147483647,min:0},on:{change:i.handleChange},model:{value:i.training.rank,callback:function(t){i.$set(i.training,"rank",t)},expression:"training.rank"}})],1)],1),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:i.$t("m.Training_Title"),required:""}},[t("el-input",{attrs:{placeholder:i.$t("m.Training_Title")},model:{value:i.training.title,callback:function(t){i.$set(i.training,"title",t)},expression:"training.title"}})],1)],1),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:i.$t("m.Training_Description"),required:""}},[t("Editor",{attrs:{value:i.training.description},on:{"update:value":function(t){return i.$set(i.training,"description",t)}}})],1)],1),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:i.$t("m.Category"),required:""}},[t("el-select",{model:{value:i.trainingCategoryId,callback:function(t){i.trainingCategoryId=t},expression:"trainingCategoryId"}},i._l(i.trainingCategoryList,(function(i,n){return t("el-option",{key:n,attrs:{label:i.name,value:i.id}})})),1)],1)],1),t("el-col",{attrs:{md:8,xs:24}},[t("el-form-item",{attrs:{label:i.$t("m.Training_Auth"),required:""}},[t("el-select",{model:{value:i.training.auth,callback:function(t){i.$set(i.training,"auth",t)},expression:"training.auth"}},[t("el-option",{attrs:{label:i.$t("m.Public_Training"),value:"Public"}}),t("el-option",{attrs:{label:i.$t("m.Private_Training"),value:"Private"}})],1)],1)],1),t("el-col",{attrs:{md:8,xs:24}},[t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"Public"!=i.training.auth,expression:"training.auth != 'Public'"}],attrs:{label:i.$t("m.Training_Password"),required:"Public"!=i.training.auth}},[t("el-input",{attrs:{placeholder:i.$t("m.Training_Password")},model:{value:i.training.privatePwd,callback:function(t){i.$set(i.training,"privatePwd",t)},expression:"training.privatePwd"}})],1)],1)],1)],1),t("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return i.saveTraining.apply(null,arguments)}}},[i._v(i._s(i.$t("m.Save"))+" ")])],1)],1)},e=[],r=(n("24b8"),n("3228")),s=n("7736"),l=n("7aa9");const o=()=>n.e("chunk-1b666b40").then(n.bind(null,"a956"));var g={name:"Training",components:{Editor:o},data(){return{title:"Create Training",training:{rank:1e3,title:"",description:"",privatePwd:"",auth:"Public"},trainingCategoryId:null,trainingCategoryList:[]}},mounted(){this.init()},watch:{$route(){"admin-edit-training"===this.$route.name?(this.title=this.$i18n.t("m.Edit_Training"),this.getTraining()):(this.title=this.$i18n.t("m.Create_Training"),this.training={rank:1e3,title:"",description:"",privatePwd:"",auth:"Public"})}},computed:{...Object(s["c"])(["userInfo"])},methods:{init(){r["a"].getTrainingCategoryList().then(i=>{let t=i.data.data;t&&t.length?(this.trainingCategoryList=t,"admin-edit-training"===this.$route.name?(this.title=this.$i18n.t("m.Edit_Training"),this.getTraining()):this.title=this.$i18n.t("m.Create_Training")):this.$alert(this.$i18n.t("m.Redirect_To_Category"),this.$i18n.t("m.Redirect"),{confirmButtonText:this.$i18n.t("m.OK"),showClose:!1,callback:i=>{this.$router.push({path:"/admin/training/category"})}})})},getTraining(){r["a"].admin_getTraining(this.$route.params.trainingId).then(i=>{let t=i.data.data;this.training=t.training||{},this.trainingCategoryId=t.trainingCategory.id||null}).catch(()=>{})},saveTraining(){if(!this.training.rank&&0!=this.training.rank)return void l["a"].error(this.$i18n.t("m.Training_rank")+" "+this.$i18n.t("m.is_required"));if(!this.training.title)return void l["a"].error(this.$i18n.t("m.Training_Title")+" "+this.$i18n.t("m.is_required"));if(!this.training.description)return void l["a"].error(this.$i18n.t("m.Training_Description")+" "+this.$i18n.t("m.is_required"));if(!this.trainingCategoryId)return void l["a"].error(this.$i18n.t("m.Training_Category")+" "+this.$i18n.t("m.is_required"));if("Public"!=this.training.auth&&!this.training.privatePwd)return void l["a"].error(this.$i18n.t("m.Training_Password")+" "+this.$i18n.t("m.is_required"));let i="admin-edit-training"===this.$route.name?"admin_editTraining":"admin_createTraining",t=Object.assign({},this.training);"admin_createTraining"===i&&(t["author"]=this.userInfo.username);let n={training:t,trainingCategory:{id:this.trainingCategoryId}};r["a"][i](n).then(i=>{l["a"].success("success"),this.$router.push({name:"admin-training-list",query:{refresh:"true"}})}).catch(()=>{})}}},u=g,d=(n("bf6d"),n("0b56")),c=Object(d["a"])(u,a,e,!1,null,"5fc6e4fe",null);t["default"]=c.exports}}]);