(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-47fc986a"],{"630f":function(t,e,i){},"8d9e":function(t,e,i){"use strict";i.r(e);var n=i("b49e"),o=(i("8300"),i("ea5b"),i("e551"),i("3228")),a=i("7aa9"),l=i("7736");n={name:"notice",components:{Editor:function(){return i.e("chunk-aa6d3ae2").then(i.bind(null,"a956"))}},data:function(){return{contestID:"",showEditNoticeDialog:!1,noticeList:[],pageSize:10,total:0,mode:"create",notice:{id:null,title:"",content:"",type:"",adminId:""},noticeDialogTitle:"Edit Notice",loading:!1,currentPage:1}},mounted:function(){this.init()},methods:{init:function(){this.getNoticeList(1)},currentChange:function(t){this.currentPage=t,this.contestID?this.getContestNoticeList(t):this.getNoticeList(t)},getNoticeList:function(t){var e=this;this.loading=!0,o.a.admin_getNoticeList(t,this.pageSize,"All").then((function(t){e.loading=!1,e.total=t.data.data.total,e.noticeList=t.data.data.records}),(function(t){e.loading=!1}))},onOpenEditDialog:function(){setTimeout((function(){var t;document.createEvent?((t=document.createEvent("HTMLEvents")).initEvent("resize",!0,!0),window.dispatchEvent(t)):document.createEventObject&&window.fireEvent("onresize")}),0)},submitNotice:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:void 0,i=(e.id||(e=this.notice),"edit"===this.mode?"admin_updateNotice":"admin_createNotice");o.a[i](e).then((function(e){t.showEditNoticeDialog=!1,a.a.success(t.$i18n.t("m.Post_successfully")),t.init()})).catch()},deleteNotice:function(t){var e=this;this.$confirm(this.$i18n.t("m.Delete_Notice_Tips"),"Warning",{confirmButtonText:this.$i18n.t("m.OK"),cancelButtonText:this.$i18n.t("m.Cancel"),type:"warning"}).then((function(){e.loading=!0,o.a.admin_deleteNotice(t).then((function(t){e.loading=!0,a.a.success(t.data.msg),e.init()}))})).catch((function(){e.loading=!1}))},openNoticeDialog:function(t){this.showEditNoticeDialog=!0,null!==t?(this.noticeDialogTitle=this.$i18n.t("m.Edit_Notice"),this.notice=Object.assign({},t),this.mode="edit"):(this.noticeDialogTitle=this.$i18n.t("m.Create_Notice"),this.notice.title="",this.notice.content="",this.notice.type="All",this.notice.adminId=this.userInfo.uid,this.mode="create")}},watch:{$route:function(){this.init()}},computed:Object(n.a)({},Object(l.c)(["userInfo"]))},i("fceb"),l=i("cba8"),l=Object(l.a)(n,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-card",[i("div",{attrs:{slot:"header"},slot:"header"},[i("span",{staticClass:"panel-title home-title"},[t._v(t._s(t.$t("m.SysNotice")))]),i("div",{staticStyle:{"font-size":"13px","margin-top":"5px",color:"red"}},[t._v(" "+t._s(t.$t("m.Push_System_Notification_Every_Hour"))+" ")])]),i("div",{staticClass:"create"},[i("el-button",{attrs:{icon:"el-icon-plus",size:"small",type:"primary"},on:{click:function(e){return t.openNoticeDialog(null)}}},[t._v(t._s(t.$t("m.Create"))+" ")])],1),i("div",{staticClass:"list"},[i("vxe-table",{ref:"table",attrs:{data:t.noticeList,loading:t.loading,"auto-resize":"",stripe:""}},[i("vxe-table-column",{attrs:{field:"id","min-width":"50",title:"ID"}}),i("vxe-table-column",{attrs:{title:t.$t("m.Notice_Title"),field:"title","min-width":"150","show-overflow":""}}),i("vxe-table-column",{attrs:{title:t.$t("m.Created_Time"),field:"gmtCreate","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return e=e.row,[t._v(" "+t._s(t._f("localtime")(e.gmtCreate))+" ")]}}])}),i("vxe-table-column",{attrs:{title:t.$t("m.Modified_Time"),field:"gmtModified","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return e=e.row,[t._v(" "+t._s(t._f("localtime")(e.gmtModified))+" ")]}}])}),i("vxe-table-column",{attrs:{title:t.$t("m.Author"),field:"adminUsername","min-width":"150","show-overflow":""}}),i("vxe-table-column",{attrs:{title:t.$t("m.Notice_Push"),field:"state","min-width":"100"}}),i("vxe-table-column",{attrs:{title:t.$t("m.Option"),"min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-tooltip",{staticClass:"item",attrs:{content:t.$t("m.Edit_Notice"),effect:"dark",placement:"top"}},[i("el-button",{attrs:{icon:"el-icon-edit-outline",size:"mini",type:"primary"},nativeOn:{click:function(i){return t.openNoticeDialog(e.row)}}})],1),i("el-tooltip",{staticClass:"item",attrs:{content:t.$t("m.Delete_Notice"),effect:"dark",placement:"top"}},[i("el-button",{attrs:{icon:"el-icon-delete-solid",size:"mini",type:"danger"},nativeOn:{click:function(i){return t.deleteNotice(e.row.id)}}})],1)]}}])})],1),i("div",{staticClass:"panel-options"},[i("el-pagination",{staticClass:"page",attrs:{"page-size":t.pageSize,total:t.total,layout:"prev, pager, next"},on:{"current-change":t.currentChange}})],1)],1)]),i("el-dialog",{attrs:{fullscreen:!0,title:t.noticeDialogTitle,visible:t.showEditNoticeDialog},on:{"update:visible":function(e){t.showEditNoticeDialog=e},open:t.onOpenEditDialog}},[i("el-form",{attrs:{model:t.notice,"label-position":"top"}},[i("el-form-item",{attrs:{label:t.$t("m.Notice_Title"),required:""}},[i("el-input",{staticClass:"title-input",attrs:{placeholder:t.$t("m.Notice_Title")},model:{value:t.notice.title,callback:function(e){t.$set(t.notice,"title",e)},expression:"notice.title"}})],1),i("el-form-item",{attrs:{label:t.$t("m.Notice_Content"),required:""}},[i("Editor",{attrs:{value:t.notice.content},on:{"update:value":function(e){return t.$set(t.notice,"content",e)}}})],1),i("div",{staticClass:"visible-box"},[i("span",[t._v(t._s(t.$t("m.Notice_Recipient")))]),i("span",[i("el-radio",{attrs:{label:"All"},model:{value:t.notice.type,callback:function(e){t.$set(t.notice,"type",e)},expression:"notice.type"}},[t._v(t._s(t.$t("m.All_User")))]),i("el-radio",{attrs:{disabled:"",label:"Single"},model:{value:t.notice.type,callback:function(e){t.$set(t.notice,"type",e)},expression:"notice.type"}},[t._v(t._s(t.$t("m.Designated_User")))]),i("el-radio",{attrs:{disabled:"",label:"Admin"},model:{value:t.notice.type,callback:function(e){t.$set(t.notice,"type",e)},expression:"notice.type"}},[t._v(t._s(t.$t("m.All_Admin")))])],1)])],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"danger"},nativeOn:{click:function(e){t.showEditNoticeDialog=!1}}},[t._v(t._s(t.$t("m.Cancel")))]),i("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.submitNotice.apply(null,arguments)}}},[t._v(t._s(t.$t("m.OK")))])],1)],1)],1)}),[],!1,null,"9e7da244",null);e.default=l.exports},fceb:function(t,e,i){"use strict";i("630f")}}]);