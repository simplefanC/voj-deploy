(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-5cfd54f8"],{"07d5":function(t,e,n){"use strict";n.r(e);var i=n("b49e"),a=n("3228"),r=n("9a36"),s=n("7736"),o=n("7aa9");i={name:"TrainingList",data:function(){return{pageSize:10,total:0,trainingList:[],keyword:"",loading:!1,excludeAdmin:!0,currentPage:1,currentId:1,downloadDialogVisible:!1,TRAINING_TYPE:{}}},mounted:function(){this.getTrainingList(this.currentPage),this.TRAINING_TYPE=Object.assign({},r.k)},watch:{$route:function(){"true"==this.$route.query.refresh&&this.getTrainingList(1)}},computed:Object(i.a)({},Object(s.c)(["isSuperAdmin","userInfo"])),methods:{currentChange:function(t){this.currentPage=t,this.getTrainingList(t)},getTrainingList:function(t){var e=this;this.loading=!0,a.a.admin_getTrainingList(t,this.pageSize,this.keyword).then((function(t){e.loading=!1,e.total=t.data.data.total,e.trainingList=t.data.data.records}),(function(t){e.loading=!1}))},goEdit:function(t){this.$router.push({name:"admin-edit-training",params:{trainingId:t}})},goTrainingProblemList:function(t){this.$router.push({name:"admin-training-problem-list",params:{trainingId:t}})},deleteTraining:function(t){var e=this;this.$confirm(this.$i18n.t("m.Delete_Training_Tips"),"Tips",{confirmButtonText:this.$i18n.t("m.OK"),cancelButtonText:this.$i18n.t("m.Cancel"),type:"warning"}).then((function(){a.a.admin_deleteTraining(t).then((function(t){o.a.success(e.$i18n.t("m.Delete_successfully")),e.currentChange(1)}))}))},changeTrainingStatus:function(t,e,n){var i=this;a.a.admin_changeTrainingStatus(t,e,n).then((function(t){o.a.success(i.$i18n.t("m.Update_Successfully"))}))},filterByKeyword:function(){this.currentChange(1)},goCreateTraining:function(){this.$router.push({name:"admin-create-training"})}}},n("bf59"),s=n("cba8"),n=Object(s.a)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-card",[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",{staticClass:"panel-title home-title"},[t._v(t._s(t.$t("m.Training_List")))]),n("div",{staticClass:"filter-row"},[n("span",[n("vxe-input",{attrs:{placeholder:t.$t("m.Enter_keyword"),size:"medium",type:"search"},on:{"search-click":t.filterByKeyword},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterByKeyword.apply(null,arguments)}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1),n("span",[n("el-button",{attrs:{icon:"el-icon-plus",size:"small",type:"primary"},on:{click:t.goCreateTraining}},[t._v(t._s(t.$t("m.Create"))+" ")])],1)])]),n("vxe-table",{ref:"xTable",attrs:{data:t.trainingList,loading:t.loading,align:"center","auto-resize":"",stripe:""}},[n("vxe-table-column",{attrs:{field:"id",title:"ID",width:"80"}}),n("vxe-table-column",{attrs:{title:t.$t("m.Order_Number"),field:"rank",width:"80"}}),n("vxe-table-column",{attrs:{title:t.$t("m.Title"),field:"title","min-width":"150","show-overflow":""}}),n("vxe-table-column",{attrs:{title:t.$t("m.Auth"),width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return e=e.row,[n("el-tag",{attrs:{type:t.TRAINING_TYPE[e.auth].color,effect:"dark"}},[t._v(" "+t._s(e.auth)+" ")])]}}])}),n("vxe-table-column",{attrs:{title:t.$t("m.Visible"),"min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[n("el-switch",{attrs:{disabled:!t.isSuperAdmin&&t.userInfo.username!=i.author},on:{change:function(e){return t.changeTrainingStatus(i.id,i.status,i.author)}},model:{value:i.status,callback:function(e){t.$set(i,"status",e)},expression:"row.status"}})]}}])}),n("vxe-table-column",{attrs:{title:t.$t("m.Info"),"min-width":"210"},scopedSlots:t._u([{key:"default",fn:function(e){return e=e.row,[n("p",[t._v("Created Time: "+t._s(t._f("localtime")(e.gmtCreate)))]),n("p",[t._v("Update Time: "+t._s(t._f("localtime")(e.gmtModified)))]),n("p",[t._v("Creator: "+t._s(e.author))])]}}])}),n("vxe-table-column",{attrs:{title:t.$t("m.Option"),"min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[t.isSuperAdmin||t.userInfo.username==i.author?[n("div",{staticStyle:{"margin-bottom":"10px"}},[n("el-tooltip",{attrs:{content:t.$t("m.Edit"),effect:"dark",placement:"top"}},[n("el-button",{attrs:{icon:"el-icon-edit",size:"mini",type:"primary"},nativeOn:{click:function(e){return t.goEdit(i.id)}}})],1),n("el-tooltip",{attrs:{content:t.$t("m.View_Training_Problem_List"),effect:"dark",placement:"top"}},[n("el-button",{attrs:{icon:"el-icon-tickets",size:"mini",type:"success"},nativeOn:{click:function(e){return t.goTrainingProblemList(i.id)}}})],1)],1)]:t._e(),t.isSuperAdmin?n("el-tooltip",{attrs:{content:t.$t("m.Delete"),effect:"dark",placement:"top"}},[n("el-button",{attrs:{icon:"el-icon-delete",size:"mini",type:"danger"},nativeOn:{click:function(e){return t.deleteTraining(i.id)}}})],1):t._e()]}}])})],1),n("div",{staticClass:"panel-options"},[n("el-pagination",{staticClass:"page",attrs:{"page-size":t.pageSize,total:t.total,layout:"prev, pager, next"},on:{"current-change":t.currentChange}})],1)],1)],1)}),[],!1,null,"a8e1ce1e",null);e.default=n.exports},"8d25":function(t,e,n){},bf59:function(t,e,n){"use strict";n("8d25")}}]);