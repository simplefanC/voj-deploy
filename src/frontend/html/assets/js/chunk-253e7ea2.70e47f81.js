(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-253e7ea2"],{"22a2":function(e,t,i){"use strict";var o=i("3228"),n=i("7aa9"),l={name:"add-problem-from-public",props:["contestID","trainingID"],data:function(){return{page:1,limit:10,total:0,loading:!1,problems:[],contest:{},keyword:""}},mounted:function(){var e=this;this.contestID?o.a.admin_getContest(this.contestID).then((function(t){e.contest=t.data.data,e.getPublicProblem(1)})).catch((function(){})):this.trainingID&&this.getPublicProblem(1)},methods:{getPublicProblem:function(e){var t=this,i=(e=(this.loading=!0,{keyword:this.keyword,currentPage:e,limit:this.limit,problemType:this.contest.type,cid:this.contest.id,tid:this.trainingID}),null);this.contestID?i="admin_getContestProblemList":this.trainingID&&(i="admin_getTrainingProblemList"),o.a[i](e).then((function(e){t.loading=!1,t.total=e.data.data.problemList.total,t.problems=e.data.data.problemList.records})).catch((function(){t.loading=!1}))},handleAddProblem:function(e,t){var i=this;this.contestID?this.$prompt(this.$i18n.t("m.Enter_The_Problem_Display_ID_in_the_Contest"),"Tips").then((function(t){t=t.value,t={pid:e,cid:i.contestID,displayId:t},o.a.admin_addContestProblemFromPublic(t).then((function(e){i.$emit("on-change"),n.a.success(i.$i18n.t("m.Add_Successfully")),i.getPublicProblem(i.page)}),(function(){}))}),(function(){})):(t={pid:e,tid:this.trainingID,displayId:t},o.a.admin_addTrainingProblemFromPublic(t).then((function(e){i.$emit("on-change"),n.a.success(i.$i18n.t("m.Add_Successfully")),i.getPublicProblem(i.page)}),(function(){})))},filterByKeyword:function(){this.getPublicProblem(this.page)}}};i("d7ec"),i=i("cba8"),i=Object(i.a)(l,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{"text-align":"center"}},[i("vxe-input",{staticStyle:{"margin-bottom":"10px"},attrs:{placeholder:e.$t("m.Enter_keyword"),size:"medium",type:"search"},on:{"search-click":e.filterByKeyword},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.filterByKeyword.apply(null,arguments)}},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}}),i("vxe-table",{attrs:{data:e.problems,loading:e.loading,align:"center","auto-resize":"",stripe:""}},[i("vxe-table-column",{attrs:{field:"problemId","min-width":"100",title:"ID"}}),i("vxe-table-column",{attrs:{title:e.$t("m.Title"),field:"title","min-width":"150"}}),i("vxe-table-column",{attrs:{title:e.$t("m.Option"),align:"center","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return[i("el-tooltip",{attrs:{content:e.$t("m.Add"),effect:"dark",placement:"top"}},[i("el-button",{attrs:{icon:"el-icon-plus",size:"mini",type:"primary"},nativeOn:{click:function(t){return e.handleAddProblem(o.id,o.problemId)}}})],1)]}}])})],1),i("el-pagination",{staticClass:"page",attrs:{"current-page":e.page,"page-size":e.limit,total:e.total,layout:"prev, pager, next"},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"current-change":e.getPublicProblem}})],1)}),[],!1,null,"558085c0",null);t.a=i.exports},"272d":function(e,t,i){},b94c:function(e,t,i){"use strict";i("beca")},beca:function(e,t,i){},d7ec:function(e,t,i){"use strict";i("272d")},f375:function(e,t,i){"use strict";i.r(t);var o=i("b49e"),n=(i("7241"),i("3228")),l=i("90b9"),a=i("22a2"),r=i("7aa9"),s=i("9a36"),c=i("7736");a={name:"ProblemList",components:{AddPublicProblem:a.a},data:function(){return{total:0,query:{problemListAuth:0,oj:"All",pageSize:10,keyword:"",currentPage:1,contestId:null},problemList:[],contestProblemMap:{},loading:!1,routeName:"",currentProblemID:"",currentRow:{},addProblemDialogVisible:!1,AddRemoteOJProblemDialogVisible:!1,addRemoteOJproblemLoading:!1,otherOJName:s.h[0].key,otherOJProblemId:"",REMOTE_OJ:{},displayId:"",showPagination:!1,predefineColors:["#ff4500","#ff8c00","#ffd700","#90ee90","#00ced1","#1e90ff","#c71585"]}},mounted:function(){this.init()},computed:Object(o.a)(Object(o.a)({},Object(c.c)(["userInfo","isSuperAdmin","isProblemAdmin"])),{},{isContest:function(){return!("admin-problem-list"==this.routeName&&!this.query.contestId)}}),methods:{init:function(){this.routeName=this.$route.name;var e=this.$route.query;this.query.currentPage=parseInt(e.currentPage)||1,this.query.pageSize=parseInt(e.pageSize)||10,this.query.keyword=e.keyword,this.query.problemListAuth=e.problemListAuth?parseInt(e.problemListAuth):0,this.query.oj=e.oj||"All",this.query.contestId=this.$route.params.contestId,this.contestProblemMap={},this.getProblemList(),this.REMOTE_OJ=Object.assign({},s.h)},goEdit:function(e){"admin-problem-list"===this.routeName?this.$router.push({name:"admin-edit-problem",params:{problemId:e},query:{back:this.$route.fullPath}}):"admin-contest-problem-list"===this.routeName&&this.$router.push({name:"admin-edit-contest-problem",params:{problemId:e,contestId:this.query.contestId}})},goCreateProblem:function(){"admin-problem-list"===this.routeName?this.$router.push({name:"admin-create-problem",query:{back:this.$route.fullPath}}):"admin-contest-problem-list"===this.routeName&&this.$router.push({name:"admin-create-contest-problem",params:{contestId:this.query.contestId}})},pushRouter:function(){this.query.contestId?this.$router.push({name:"admin-contest-problem-list",query:this.query,params:{contestId:this.query.contestId}}):this.$router.push({name:"admin-problem-list",query:this.query})},currentChange:function(e){this.query.currentPage=e,this.pushRouter()},onPageSizeChange:function(e){this.query.pageSize=e,this.pushRouter()},getProblemList:function(){var e=this,t={limit:this.query.pageSize,currentPage:this.query.currentPage,keyword:this.query.keyword,cid:this.query.contestId,oj:this.query.oj};0!=this.problemListAuth&&(t.auth=this.query.problemListAuth),this.loading=!0,"admin-problem-list"===this.routeName?n.a.admin_getProblemList(t).then((function(t){e.loading=!1,e.showPagination=!0,e.total=t.data.data.total,e.problemList=t.data.data.records,e.contestProblemMap={}}),(function(t){e.loading=!1,e.showPagination=!0})):n.a.admin_getContestProblemList(t).then((function(t){e.loading=!1,e.showPagination=!0,e.total=t.data.data.problemList.total,e.problemList=t.data.data.problemList.records,e.contestProblemMap=t.data.data.contestProblemMap,e.showPagination=!0}),(function(t){e.loading=!1,e.showPagination=!0}))},changeProblemAuth:function(e){var t=this;n.a.admin_changeProblemAuth(e).then((function(e){r.a.success(t.$i18n.t("m.Update_Successfully"))}))},deleteProblem:function(e){var t=this;this.$confirm(this.$i18n.t("m.Delete_Problem_Tips"),"Tips",{type:"warning"}).then((function(){var i="admin-problem-list"===t.routeName?"admin_deleteProblem":"admin_deleteContestProblem";n.a[i](e,null).then((function(e){r.a.success(t.$i18n.t("m.Delete_successfully")),t.getProblemList()})).catch((function(){}))}),(function(){}))},removeProblem:function(e){var t=this;this.$confirm(this.$i18n.t("m.Remove_Contest_Problem_Tips"),"Tips",{type:"warning"}).then((function(){n.a.admin_deleteContestProblem(e,t.query.contestId).then((function(e){r.a.success("success"),t.getProblemList()})).catch((function(){}))}),(function(){}))},updateProblem:function(e){var t=this,i=(e=Object.assign({},e),"");i=this.query.contestId?(e.contest_id=this.query.contestId,"admin_editContestProblem"):"admin_editProblem";n.a[i](e).then((function(e){r.a.success(t.$i18n.t("m.Update_Successfully")),t.getProblemList()})).catch((function(){}))},downloadTestCase:function(e){var t=this;l.a.downloadFile("/api/file/download-testcase?pid="+e).then((function(){t.$alert(t.$i18n.t("m.Download_Testcase_Success"),"Tips")}))},ProblemListChangeFilter:function(){this.pushRouter()},filterByKeyword:function(){this.query.currentPage=1,this.pushRouter()},addRemoteOJProblem:function(){var e,t=this;this.otherOJProblemId?!this.displayId&&this.query.contestId?r.a.error(this.$i18n.t("m.The_Problem_Display_ID_in_the_Contest_is_required")):(this.addRemoteOJproblemLoading=!0,e="",e=this.query.contestId?"admin_addContestRemoteOJProblem":"admin_addRemoteOJProblem",n.a[e](this.otherOJName,this.otherOJProblemId,this.query.contestId,this.displayId).then((function(e){t.addRemoteOJproblemLoading=!1,t.AddRemoteOJProblemDialogVisible=!1,r.a.success(t.$i18n.t("m.Add_Successfully")),t.currentChange(1)}),(function(e){t.addRemoteOJproblemLoading=!1}))):r.a.error(this.$i18n.t("m.Problem_ID_is_required"))},changeContestProblemColor:function(e,t){var i=this;n.a.admin_setContestProblemInfo({id:e,color:t}).then((function(e){r.a.success(i.$i18n.t("m.Update_Balloon_Color_Successfully"))}))}},watch:{$route:function(e,t){this.init()}}},i("b94c"),o=i("cba8"),c=Object(o.a)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-card",[i("div",{attrs:{slot:"header"},slot:"header"},[i("span",{staticClass:"panel-title home-title"},[e._v(e._s(e.query.contestId?e.$t("m.Contest_Problem_List"):e.$t("m.Problem_List")))]),i("div",{staticClass:"filter-row"},[i("span",[i("el-button",{attrs:{icon:"el-icon-plus",size:"small",type:"primary"},on:{click:e.goCreateProblem}},[e._v(e._s(e.$t("m.Create"))+" ")])],1),e.query.contestId?i("span",[i("el-button",{attrs:{icon:"el-icon-plus",size:"small",type:"primary"},on:{click:function(t){e.addProblemDialogVisible=!0}}},[e._v(e._s(e.$t("m.Add_From_Public_Problem"))+" ")])],1):e._e(),i("span",[i("el-button",{attrs:{icon:"el-icon-plus",size:"small",type:"success"},on:{click:function(t){e.AddRemoteOJProblemDialogVisible=!0}}},[e._v(e._s(e.$t("m.Add_Remote_OJ_Problem"))+" ")])],1),i("span",[i("vxe-input",{attrs:{placeholder:e.$t("m.Enter_keyword"),size:"medium",type:"search"},on:{"search-click":e.filterByKeyword},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.filterByKeyword.apply(null,arguments)}},model:{value:e.query.keyword,callback:function(t){e.$set(e.query,"keyword",t)},expression:"query.keyword"}})],1),i("span",[i("el-select",{staticStyle:{width:"180px"},attrs:{size:"small"},on:{change:e.ProblemListChangeFilter},model:{value:e.query.oj,callback:function(t){e.$set(e.query,"oj",t)},expression:"query.oj"}},[i("el-option",{attrs:{label:e.$t("m.All_Problem"),value:"All"}}),i("el-option",{attrs:{label:e.$t("m.My_OJ"),value:"LOCAL"}}),e._l(e.REMOTE_OJ,(function(e,t){return i("el-option",{key:t,attrs:{label:e.name,value:e.key}})}))],2)],1),e.query.contestId?e._e():i("span",[i("el-select",{staticStyle:{width:"180px"},attrs:{size:"small"},on:{change:e.ProblemListChangeFilter},model:{value:e.query.problemListAuth,callback:function(t){e.$set(e.query,"problemListAuth",t)},expression:"query.problemListAuth"}},[i("el-option",{attrs:{label:e.$t("m.All_Problem"),value:0}}),i("el-option",{attrs:{label:e.$t("m.Public_Problem"),value:1}}),i("el-option",{attrs:{label:e.$t("m.Private_Problem"),value:2}}),i("el-option",{attrs:{label:e.$t("m.Contest_Problem"),value:3}})],1)],1)])]),i("vxe-table",{ref:"adminProblemList",attrs:{data:e.problemList,loading:e.loading,align:"center","auto-resize":"",stripe:""}},[i("vxe-table-column",{attrs:{field:"id","min-width":"64",title:"ID"}}),e.isContest?i("vxe-table-column",{attrs:{title:e.$t("m.Original_Display"),align:"left","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return t=t.row,[e.query.contestId?i("p",[e._v(" "+e._s(e.$t("m.Display_ID"))+"："+e._s(t.problemId)+" ")]):e._e(),e.query.contestId?i("p",[e._v(e._s(e.$t("m.Title"))+"："+e._s(t.title))]):i("span",[e._v(e._s(t.problemId))])]}}])}):i("vxe-table-column",{attrs:{title:e.$t("m.Display_ID"),field:"problemId","min-width":"100"}}),e.isContest?i("vxe-table-column",{attrs:{title:e.$t("m.Contest_Display"),align:"left","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return[e.contestProblemMap[o.id]?i("p",[e._v(" "+e._s(e.$t("m.Display_ID"))+"："+e._s(e.contestProblemMap[o.id].displayId)+" ")]):e._e(),e.contestProblemMap[o.id]?i("p",[e._v(" "+e._s(e.$t("m.Title"))+"："+e._s(e.contestProblemMap[o.id].displayTitle)+" ")]):e._e(),e.contestProblemMap[o.id]?i("span",[e._v(" "+e._s(e.$t("m.Balloon_Color"))+"："),i("el-color-picker",{staticStyle:{"vertical-align":"middle"},attrs:{predefine:e.predefineColors,"show-alpha":"",size:"small"},on:{change:function(t){return e.changeContestProblemColor(e.contestProblemMap[o.id].id,e.contestProblemMap[o.id].color)}},model:{value:e.contestProblemMap[o.id].color,callback:function(t){e.$set(e.contestProblemMap[o.id],"color",t)},expression:"contestProblemMap[row.id].color"}})],1):i("span",[e._v(e._s(o.title))])]}}])}):i("vxe-table-column",{attrs:{title:e.$t("m.Title"),field:"title","min-width":"150","show-overflow":""}}),i("vxe-table-column",{attrs:{title:e.$t("m.Author"),field:"author","min-width":"130","show-overflow":""}}),i("vxe-table-column",{attrs:{title:e.$t("m.Created_Time"),"min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return t=t.row,[e._v(" "+e._s(e._f("localtime")(t.gmtCreate))+" ")]}}])}),i("vxe-table-column",{attrs:{title:e.$t("m.Modified_User"),field:"modifiedUser","min-width":"96","show-overflow":""}}),i("vxe-table-column",{attrs:{title:e.$t("m.Auth"),"min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return[i("el-select",{attrs:{disabled:!e.isSuperAdmin&&!e.isProblemAdmin&&!e.query.contestId,size:"small"},on:{change:function(t){return e.changeProblemAuth(o)}},model:{value:o.auth,callback:function(t){e.$set(o,"auth",t)},expression:"row.auth"}},[i("el-option",{attrs:{disabled:!e.isSuperAdmin&&!e.isProblemAdmin,label:e.$t("m.Public_Problem"),value:1}}),i("el-option",{attrs:{label:e.$t("m.Private_Problem"),value:2}}),i("el-option",{attrs:{disabled:!e.query.contestId,label:e.$t("m.Contest_Problem"),value:3}})],1)]}}])}),i("vxe-table-column",{attrs:{"min-width":"200",title:"Option"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return[e.isSuperAdmin||e.isProblemAdmin||o.author==e.userInfo.username?i("el-tooltip",{attrs:{content:e.$t("m.Edit"),effect:"dark",placement:"top"}},[i("el-button",{attrs:{icon:"el-icon-edit-outline",size:"mini",type:"primary"},nativeOn:{click:function(t){return e.goEdit(o.id)}}})],1):e._e(),e.isSuperAdmin||e.isProblemAdmin?i("el-tooltip",{attrs:{content:e.$t("m.Download_Testcase"),effect:"dark",placement:"top"}},[i("el-button",{attrs:{icon:"el-icon-download",size:"mini",type:"success"},nativeOn:{click:function(t){return e.downloadTestCase(o.id)}}})],1):e._e(),e.query.contestId?i("el-tooltip",{attrs:{content:e.$t("m.Remove"),effect:"dark",placement:"top"}},[i("el-button",{attrs:{icon:"el-icon-close",size:"mini",type:"warning"},nativeOn:{click:function(t){return e.removeProblem(o.id)}}})],1):e._e(),e.isContest||!e.isSuperAdmin&&!e.isProblemAdmin?e._e():i("el-tooltip",{attrs:{content:e.$t("m.Delete"),effect:"dark",placement:"top"}},[i("el-button",{attrs:{icon:"el-icon-delete-solid",size:"mini",type:"danger"},nativeOn:{click:function(t){return e.deleteProblem(o.id)}}})],1)]}}])})],1),i("div",{staticClass:"panel-options"},[e.showPagination?i("el-pagination",{staticClass:"page",attrs:{"current-page":e.query.currentPage,"page-size":e.query.pageSize,"page-sizes":[10,30,50,100],total:e.total,layout:"prev, pager, next, sizes"},on:{"update:currentPage":function(t){return e.$set(e.query,"currentPage",t)},"update:current-page":function(t){return e.$set(e.query,"currentPage",t)},"current-change":e.currentChange,"size-change":e.onPageSizeChange}}):e._e()],1)],1),e.query.contestId?i("el-dialog",{attrs:{title:e.$t("m.Add_Contest_Problem"),visible:e.addProblemDialogVisible,width:"90%","close-on-click-modal":!1},on:{"update:visible":function(t){e.addProblemDialogVisible=t}}},[i("AddPublicProblem",{attrs:{contestID:e.query.contestId},on:{"on-change":e.getProblemList}})],1):e._e(),i("el-dialog",{attrs:{title:e.$t("m.Add_Remote_OJ_Problem"),visible:e.AddRemoteOJProblemDialogVisible,width:"350px","close-on-click-modal":!1},on:{"update:visible":function(t){e.AddRemoteOJProblemDialogVisible=t}}},[i("el-form",[i("el-form-item",{attrs:{label:e.$t("m.Remote_OJ")}},[i("el-select",{attrs:{size:"small"},model:{value:e.otherOJName,callback:function(t){e.otherOJName=t},expression:"otherOJName"}},e._l(e.REMOTE_OJ,(function(e,t){return i("el-option",{key:t,attrs:{label:e.name,value:e.key}})})),1)],1),i("el-form-item",{attrs:{label:e.$t("m.Problem_ID"),required:""}},[i("el-input",{attrs:{size:"small"},model:{value:e.otherOJProblemId,callback:function(t){e.otherOJProblemId=t},expression:"otherOJProblemId"}})],1),e.query.contestId?i("el-form-item",{attrs:{label:e.$t("m.Enter_The_Problem_Display_ID_in_the_Contest"),required:""}},[i("el-input",{attrs:{size:"small"},model:{value:e.displayId,callback:function(t){e.displayId=t},expression:"displayId"}})],1):e._e(),i("el-form-item",{staticStyle:{"text-align":"center"}},[i("el-button",{attrs:{loading:e.addRemoteOJproblemLoading,icon:"el-icon-plus",type:"primary"},on:{click:e.addRemoteOJProblem}},[e._v(e._s(e.$t("m.Add"))+" ")])],1)],1)],1)],1)}),[],!1,null,"74060c82",null);t.default=c.exports}}]);