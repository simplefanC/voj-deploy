(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5f27d54e"],{4519:function(t,e,s){},"880c":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t._self._c;return e("div",[e("el-card",[e("div",{attrs:{slot:"header"},slot:"header"},[e("span",{staticClass:"panel-title home-title"},[t._v(t._s(t.$t("m.Discussion_Admin")))]),e("div",{staticClass:"filter-row"},[e("span",[e("el-button",{attrs:{icon:"el-icon-delete-solid",size:"small",type:"danger"},on:{click:function(e){return t.deleteDiscussion(null)}}},[t._v(t._s(t.$t("m.Delete"))+" ")])],1),e("span",[e("vxe-input",{attrs:{placeholder:t.$t("m.Enter_keyword"),size:"medium",type:"search"},on:{"search-click":t.filterByKeyword},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterByKeyword.apply(null,arguments)}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1)])]),e("vxe-table",{ref:"xTable",attrs:{"checkbox-config":{highlight:!0,range:!0},data:t.discussionList,loading:t.discussionLoadingTable,align:"center","auto-resize":"",stripe:""},on:{"checkbox-change":t.handleSelectionChange,"checkbox-all":t.handlechangeAll}},[e("vxe-table-column",{attrs:{type:"checkbox",width:"60"}}),e("vxe-table-column",{attrs:{field:"id",title:"ID",width:"60"}}),e("vxe-table-column",{attrs:{title:t.$t("m.Title"),field:"title","min-width":"150","show-overflow":""}}),e("vxe-table-column",{attrs:{title:t.$t("m.Author"),field:"author","min-width":"150","show-overflow":""}}),e("vxe-table-column",{attrs:{title:t.$t("m.Likes"),field:"likeNum","min-width":"96"}}),e("vxe-table-column",{attrs:{title:t.$t("m.Views"),field:"viewNum","min-width":"96"}}),e("vxe-table-column",{attrs:{title:t.$t("m.Created_Time"),field:"gmtCreate","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function({row:e}){return[t._v(" "+t._s(t._f("localtime")(e.gmtCreate))+" ")]}}])}),e("vxe-table-column",{attrs:{title:t.$t("m.Status"),field:"status","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function({row:s}){return[e("el-select",{attrs:{size:"small"},on:{change:function(e){return t.changeDiscussionStatus(s)}},model:{value:s.status,callback:function(e){t.$set(s,"status",e)},expression:"row.status"}},[e("el-option",{key:0,attrs:{label:t.$t("m.Normal"),value:0}}),e("el-option",{key:1,attrs:{label:t.$t("m.Disable"),value:1}})],1)]}}])}),e("vxe-table-column",{attrs:{title:t.$t("m.Top"),field:"topPriority","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function({row:s}){return[e("el-switch",{attrs:{"active-value":!0,"inactive-value":!1,"active-text":"","inactive-text":""},on:{change:function(e){return t.handleTopSwitch(s)}},model:{value:s.topPriority,callback:function(e){t.$set(s,"topPriority",e)},expression:"row.topPriority"}})]}}])}),e("vxe-table-column",{attrs:{title:t.$t("m.Option"),"min-width":"130"},scopedSlots:t._u([{key:"default",fn:function({row:s}){return[e("el-tooltip",{attrs:{content:t.$t("m.Delete"),effect:"dark",placement:"top"}},[e("el-button",{attrs:{icon:"el-icon-delete-solid",size:"mini",type:"danger"},nativeOn:{click:function(e){return t.deleteDiscussion([s.id])}}})],1),e("el-tooltip",{attrs:{content:t.$t("m.View_Discussion"),effect:"dark",placement:"top"}},[e("el-button",{attrs:{icon:"el-icon-search",size:"mini",type:"primary"},nativeOn:{click:function(e){return t.toDiscussion(s.id)}}})],1)]}}])})],1),e("div",{staticClass:"panel-options"},[e("el-pagination",{staticClass:"page",attrs:{"page-size":t.pageSize,total:t.discussionTotal,layout:"prev, pager, next"},on:{"current-change":t.discussionCurrentChange}})],1)],1),e("el-card",{staticStyle:{"margin-top":"20px"}},[e("div",{attrs:{slot:"header"},slot:"header"},[e("span",{staticClass:"panel-title home-title"},[t._v(t._s(t.$t("m.Discussion_Report")))])]),e("vxe-table",{ref:"table",attrs:{data:t.discussionReportList,loading:t.discussionReportLoadingTable,align:"center","auto-resize":"",stripe:""}},[e("vxe-table-column",{attrs:{field:"id","min-width":"60",title:"ID"}}),e("vxe-table-column",{attrs:{title:t.$t("m.Discussion_ID"),field:"did","min-width":"150"}}),e("vxe-table-column",{attrs:{title:t.$t("m.Reporter"),field:"reporter","min-width":"150","show-overflow":""}}),e("vxe-table-column",{attrs:{title:t.$t("m.Report_Time"),field:"gmtCreate","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function({row:e}){return[t._v(" "+t._s(t._f("localtime")(e.gmtCreate))+" ")]}}])}),e("vxe-table-column",{attrs:{title:t.$t("m.Checked"),field:"status","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function({row:s}){return[e("el-switch",{attrs:{"active-value":!0,"inactive-value":!1,"active-text":"","inactive-text":""},on:{change:function(e){return t.handleCheckedSwitch(s)}},model:{value:s.status,callback:function(e){t.$set(s,"status",e)},expression:"row.status"}})]}}])}),e("vxe-table-column",{attrs:{title:t.$t("m.Option"),"min-width":"150"},scopedSlots:t._u([{key:"default",fn:function({row:s}){return[e("el-tooltip",{staticClass:"item",attrs:{content:t.$t("m.View_Report_content"),effect:"dark",placement:"top"}},[e("el-button",{attrs:{icon:"el-icon-document",size:"mini",type:"success"},nativeOn:{click:function(e){return t.openReportDialog(s.content)}}})],1),e("el-tooltip",{attrs:{content:t.$t("m.View_Discussion"),effect:"dark",placement:"top"}},[e("el-button",{attrs:{icon:"el-icon-search",size:"mini",type:"primary"},nativeOn:{click:function(e){return t.toDiscussion(s.did)}}})],1)]}}])})],1),e("div",{staticClass:"panel-options"},[e("el-pagination",{staticClass:"page",attrs:{"page-size":t.pageSize,total:t.discussionReportTotal,layout:"prev, pager, next"},on:{"current-change":t.discussionReportCurrentChange}})],1)],1)],1)},n=[],o=(s("24b8"),s("3228")),a=s("7aa9"),l={name:"discussion",data(){return{pageSize:10,discussionTotal:0,discussionList:[],selectedDiscussions:[],keyword:"",discussionLoadingTable:!1,discussionCurrentPage:1,discussionReportList:[],discussionReportTotal:0,discussionReportCurrentPage:1,discussionReportLoadingTable:!1}},mounted(){this.getDiscussionList(1),this.getDiscussionReportList()},methods:{discussionCurrentChange(t){this.discussionCurrentPage=t,this.getDiscussionList(t)},discussionReportCurrentChange(t){this.discussionReportCurrentPage=t,this.getDiscussionReportList()},getDiscussionList(t){this.discussionLoadingTable=!0;let e={currentPage:t,keyword:this.keyword,admin:!0};o["a"].getDiscussionList(this.pageSize,e).then(t=>{this.discussionLoadingTable=!1,this.discussionTotal=t.data.data.total,this.discussionList=t.data.data.records},t=>{this.discussionLoadingTable=!1})},getDiscussionReportList(){this.discussionReportLoadingTable=!0,o["a"].admin_getDiscussionReport(this.discussionReportCurrentPage,this.pageSize).then(t=>{this.discussionReportLoadingTable=!1,this.discussionReportList=t.data.data.records,this.discussionReportTotal=t.data.data.total},t=>{this.discussionReportLoadingTable=!1})},filterByKeyword(){this.discussionCurrentChange(1),this.keyword=""},handleSelectionChange({records:t}){this.selectedDiscussions=[];for(let e=0;e<t.length;e++)this.selectedDiscussions.push(t[e].id)},handlechangeAll(){let t=this.$refs.xTable.getCheckboxRecords();this.selectedDiscussions=[];for(let e=0;e<t.length;e++)this.selectedDiscussions.push(t[e].id)},changeDiscussionStatus(t){let e={id:t.id,status:t.status};o["a"].admin_updateDiscussion(e).then(t=>{a["a"].success(this.$i18n.t("m.Update_Successfully"))})},handleTopSwitch(t){let e={id:t.id,topPriority:t.topPriority};o["a"].admin_updateDiscussion(e).then(t=>{a["a"].success(this.$i18n.t("m.Update_Successfully"))})},handleCheckedSwitch(t){let e={id:t.id,status:t.status};o["a"].admin_updateDiscussionReport(e).then(t=>{a["a"].success(this.$i18n.t("m.Update_Successfully"))})},toDiscussion(t){window.open("/discussion-detail/"+t)},deleteDiscussion(t){t||(t=this.selectedDiscussions),t.length>0?this.$confirm(this.$i18n.t("m.Delete_Discussion_Tips"),"Tips",{type:"warning"}).then(()=>{o["a"].admin_deleteDiscussion(t).then(t=>{a["a"].success(t.data.msg),this.selectedDiscussions=[],this.getDiscussionList(this.currentPage)}).catch(()=>{this.selectedDiscussions=[],this.getDiscussionList(this.currentPage)})},()=>{}):a["a"].warning(this.$i18n.t("m.The_number_of_discussions_selected_cannot_be_empty"))},openReportDialog(t){let e,s="#(.*?)# ",i=RegExp(s,"g"),n="<strong>"+this.$i18n.t("m.Tags")+"</strong>：";while(e=i.exec(t))n+=e[1]+" ";n+="<br><br><strong>"+this.$i18n.t("m.Content")+"</strong>："+t.replace(/#(.*?)# /g,""),this.$alert(n,this.$i18n.t("m.Report_Content"),{confirmButtonText:this.$i18n.t("m.OK"),dangerouslyUseHTMLString:!0})}}},c=l,r=(s("f2af"),s("0b56")),u=Object(r["a"])(c,i,n,!1,null,"51c85c0a",null);e["default"]=u.exports},f2af:function(t,e,s){"use strict";s("4519")}}]);